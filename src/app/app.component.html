<div class="app-shell">
  <header class="hero">
    <div>
      <p class="eyebrow">Hotel Booking Demo</p>
      <h1>Plan, compare, and reserve a stay in minutes.</h1>
      <p class="subtitle">
        This UI will eventually drive the Spring Boot booking backend. For now you can
        explore the page layout, cards, and CTAs while the API hooks are built.
      </p>
    </div>
    <div class="hero-card">
      <h2>Workflow preview</h2>
      <ol>
        <li>Filter the hotel catalog by city.</li>
        <li>Search availability for your travel dates.</li>
        <li>Select a room and reserve it with guest details.</li>
      </ol>
      <p class="hero-hint">
        Buttons, lists, and panels are already skinned—future stages will wire live data and
        forms here.
      </p>
    </div>
  </header>

  <main class="grid">
    <section class="panel">
      <header>
        <h2>Hotel catalog</h2>
        <p>Results ordered by review score.</p>
      </header>
      <form class="inline-form" (ngSubmit)="applyHotelFilter()">
        <input
          type="text"
          placeholder="Search by city"
          aria-label="City filter"
          [formControl]="hotelFilterControl"
        />
        <button type="submit" [disabled]="hotelsLoading">
          {{ hotelsLoading ? 'Searching…' : 'Apply' }}
        </button>
        <button
          type="button"
          class="ghost"
          (click)="resetHotelFilter()"
          [disabled]="hotelsLoading"
        >
          Reset
        </button>
      </form>
      <p class="error" *ngIf="hotelsError">{{ hotelsError }}</p>
      <div class="list">
        <article *ngFor="let hotel of hotels" class="hotel-card">
          <div>
            <h3>{{ hotel.name }}</h3>
            <p class="muted">{{ hotel.city }} • {{ hotel.roomCount }} rooms</p>
          </div>
          <span class="rating">{{ hotel.rating }}</span>
        </article>
        <p class="muted" *ngIf="!hotels.length && !hotelsLoading">
          No hotels found. Try another filter.
        </p>
      </div>
    </section>

    <section class="panel">
      <header>
        <h2>Availability search</h2>
        <p>This will show rooms that match the criteria.</p>
      </header>
      <form class="form-grid" [formGroup]="availabilityForm" (ngSubmit)="searchAvailability()">
        <label>
          City
          <input
            type="text"
            placeholder="Austin"
            formControlName="city"
            [class.invalid]="showControlInvalid('city')"
            [disabled]="roomsLoading"
          />
          <p class="field-error" *ngIf="showControlError('city', 'required')">City is required.</p>
        </label>
        <label>
          Check-in
          <input
            type="date"
            formControlName="checkIn"
            [class.invalid]="showControlInvalid('checkIn')"
            [disabled]="roomsLoading"
          />
          <p class="field-error" *ngIf="showControlError('checkIn', 'required')">
            Check-in date is required.
          </p>
        </label>
        <label>
          Check-out
          <input
            type="date"
            formControlName="checkOut"
            [class.invalid]="showControlInvalid('checkOut') || availabilityForm.hasError('dateOrder')"
            [disabled]="roomsLoading"
          />
          <p class="field-error" *ngIf="showControlError('checkOut', 'required')">
            Check-out date is required.
          </p>
          <p class="field-error" *ngIf="availabilityForm.hasError('dateOrder') && availabilityForm.touched">
            Check-out must be after the check-in date.
          </p>
        </label>
        <label>
          Guests
          <input
            type="number"
            min="1"
            formControlName="guests"
            [class.invalid]="showControlInvalid('guests')"
            [disabled]="roomsLoading"
          />
          <p class="field-error" *ngIf="showControlError('guests', 'required')">Guests required.</p>
          <p class="field-error" *ngIf="showControlError('guests', 'min')">
            At least one guest is required.
          </p>
        </label>
        <button type="submit" class="primary" [disabled]="roomsLoading">
          {{ roomsLoading ? 'Searching…' : 'Find rooms' }}
        </button>
      </form>
      <p class="error" *ngIf="roomsError">{{ roomsError }}</p>
      <p class="muted" *ngIf="roomsLoading">Searching available rooms…</p>
      <div class="list room-list">
        <article *ngFor="let room of rooms" class="room-card">
          <div>
            <h3>{{ room.hotelName }} • {{ room.roomNumber }}</h3>
            <p class="muted">
              {{ room.roomType }} · Sleeps {{ room.capacity }} · {{ room.hotelRating }}★
            </p>
          </div>
          <div class="room-actions">
            <ng-container *ngIf="room.baseRate !== null; else rateUnknown">
              <p class="rate">${{ room.baseRate }} <span>/night</span></p>
            </ng-container>
            <ng-template #rateUnknown>
              <p class="rate">Rate on request</p>
            </ng-template>
            <button type="button" (click)="selectRoom(room)" [disabled]="roomsLoading">
              Book this room
            </button>
          </div>
        </article>
        <p class="muted" *ngIf="!rooms.length && !roomsLoading && !roomsError">
          No rooms available for that search yet.
        </p>
      </div>
    </section>

    <section class="panel">
      <header>
        <h2>Booking details</h2>
        <p>Guest information and final confirmation.</p>
      </header>
      <div class="selected-room-banner" *ngIf="selectedRoom; else selectionPrompt">
        Booking <strong>{{ selectedRoom.hotelName }}</strong>, room
        <strong>{{ selectedRoom.roomNumber }}</strong>
        <ng-container *ngIf="stayNights; else nightsUnknown">
          for <strong>{{ stayNights }}</strong> nights.
        </ng-container>
        <ng-template #nightsUnknown>for your selected dates.</ng-template>
      </div>
      <ng-template #selectionPrompt>
        <div class="selected-room-banner muted">
          Select a room from availability to start booking.
        </div>
      </ng-template>
      <form class="form-grid">
        <label>
          First name
          <input type="text" placeholder="Jordan" />
        </label>
        <label>
          Last name
          <input type="text" placeholder="Bennett" />
        </label>
        <label>
          Email
          <input type="email" placeholder="jordan@example.com" />
        </label>
        <label>
          Guests
          <input type="number" min="1" value="2" />
        </label>
        <label>
          Check-in
          <input type="date" />
        </label>
        <label>
          Check-out
          <input type="date" />
        </label>
        <button type="button" class="primary">Confirm booking</button>
      </form>
      <div class="confirmation">
        <h3>Last booking</h3>
        <p>#9001 for Jordan Bennett — Aug 12 → Aug 15</p>
        <p>Status: CONFIRMED</p>
      </div>
    </section>
  </main>
</div>
